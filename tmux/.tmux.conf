# ╭──────────────────────────────────────────────────────────╮
# │                         Plugins                          │
# ╰──────────────────────────────────────────────────────────╯

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
#让tmux的内容复制到剪切板
set -g @plugin 'tmux-plugins/tmux-yank'
#让tmux里的vim能无缝跳转
# set -g @plugin 'christoomey/vim-tmux-navigator'
#在tmux里显示cpu
set -g @plugin 'tmux-plugins/tmux-cpu'
#在tmux里的窗口可以用图标显示
# set -g @plugin 'joshmedeski/tmux-nerd-font-window-name'

#==========主题插件， 不想用就把这段注释掉，把下面的窗口美化打开==========
# set -g @plugin 'catppuccin/tmux#v2.1.3'
# # Configure the catppuccin plugin
# set -g @catppuccin_flavor "mocha"
# set -g @catppuccin_window_status_style "rounded"
# # Load catppuccin
# run ~/.config/tmux/plugins/catppuccin/tmux/catppuccin.tmux
# # Make the status line pretty and add some modules
# set -g status-right-length 100
# set -g status-left-length 100
# set -g status-right "#{E:@catppuccin_status_application}"
# set -agF status-right "#{E:@catppuccin_status_cpu}"
# set -ag status-right "#{E:@catppuccin_status_session}"
#
# ==========在tmux下复制关键词：ctrl+b 然后按下空格键激活， 高亮出选择复制==========
set -g @plugin 'fcsonline/tmux-thumbs'
run-shell ~/.tmux/plugins/tmux-thumbs/tmux-thumbs.tmux
set -g @thumbs-position off_left
set -g @thumbs-osc52 0 # so you don't get a blank page
set -g @thumbs-command 'tmux set-buffer -w "{}"'
set -g @thumbs-upcase-command 'tmux set-buffer -w "{}" && tmux paste-buffer'
set -g @thumbs-fg-color '#11111b'
set -g @thumbs-bg-color '#f5e0dc'
set -g @thumbs-hint-fg-color '#d20f39'
set -g @thumbs-hint-bg-color '#f5e0dc'
set -g @thumbs-regexp-1 'KEY: \S+\s+([^\s;]+);'
set -g @thumbs-regexp-2 '(\S+\.pdf)'

#运行tpm插件,记得先去github下载这个插件:https://github.com/tmux-plugins/tpm
run '~/.tmux/plugins/tpm/tpm'

# Themes
set-option -g status-position bottom


#使左侧不显示内容
set-option -g status-left ' '
set-option -g status-left-length 0

#==========不使用插件的窗口美化,想用时把上面cat主题注释，这下面的打开就行
#状态栏前景色和背景色
set -g status-bg '#1e1e2e'
set -g status-fg '#cdd6f4'

# set -g status-right '#{cpu_fg_color} 󰻠 #{cpu_percentage} #{ram_fg_color} 󰍛 #{ram_percentage}#{?#{==:#{gpu_percentage},No GPU},, #{gpu_fg_color}  #{gpu_percentage}}'
# set -g status-right '#{cpu_fg_color} 󰻠 #{cpu_percentage} #{ram_fg_color} 󰍛 #{ram_percentage} #[bg=#FF661D]  [ #S ]'
set -g status-right '#{cpu_fg_color} 󰻠 #{cpu_percentage} #{ram_fg_color} 󰍛 #{ram_percentage}   #[bg=#34ade5][ #S ]'

set -g copy-mode-match-style 'fg=#1e1e2e,bg=#cdd6f4'
set -g copy-mode-current-match-style 'fg=#1e1e2e,bg=#d20f39'

set -g pane-border-style 'fg=#45475a'
set -g pane-active-border-style 'fg=#f9e2af'

set -g window-status-style 'fg=#585b70'
set -g window-status-current-style 'fg=#f9e2af'

set -g window-status-format '#{?#{==:#{window_index},1},󰬺 ,#{?#{==:#{window_index},2},󰬻 ,#{?#{==:#{window_index},3},󰬼 ,#{?#{==:#{window_index},4},󰬽 ,#{?#{==:#{window_index},5},󰬾 ,#{?#{==:#{window_index},6},󰬿 ,#{?#{==:#{window_index},7},󰭀 ,#{?#{==:#{window_index},8},󰭁 ,#{?#{==:#{window_index},9},󰭂 ,󰿩 }}}}}}}}}#W#{?window_zoomed_flag, 󰁌 , }'
set -g window-status-current-format '#{?#{==:#{window_index},1},󰬺 ,#{?#{==:#{window_index},2},󰬻 ,#{?#{==:#{window_index},3},󰬼 ,#{?#{==:#{window_index},4},󰬽 ,#{?#{==:#{window_index},5},󰬾 ,#{?#{==:#{window_index},6},󰬿 ,#{?#{==:#{window_index},7},󰭀 ,#{?#{==:#{window_index},8},󰭁 ,#{?#{==:#{window_index},9},󰭂 ,󰿩 }}}}}}}}}#W#{?window_zoomed_flag, 󰁌 , }'

# ╭──────────────────────────────────────────────────────────╮
# │                         Options                          │
# ╰──────────────────────────────────────────────────────────╯

#set true color    # 真彩显示
# set-option -sa terminal-overrides ",xterm*:Tc"
# set-option -sa terminal-features ',xterm-kitty:RGB'
set -g default-terminal "${TERM}" 
set -sg terminal-overrides ",*:RGB"

set -g base-index 1 # 设置窗口的起始下标为1
set -g pane-base-index 1 # 设置面板的起始下标为1
set -g renumber-windows on    #关闭窗口后，窗口的下标会重新计算
set -g history-limit 10000    #记录历史行数
# set -g mouse on
set-window-option -g pane-base-index 1
set-window-option -g mode-keys vi
set-option -g allow-rename on
set -sg escape-time 0 # more fluent escape key
setw -g monitor-activity on # 非当前窗口有内容更新时在状态栏通知
set -g message-style "bg=#202529, fg=#91A8BA" # 指定消息通知的前景、后景色
# set -g message-style "fg=yellow" # 指定消息通知的前景、后景色

# 设置分隔线为亮色
set -g pane-border-lines simple #分割窗口的线为ASCII
set -g pane-border-style fg=brightblue
set -g pane-active-border-style fg=brightgreen

# yazi
# set -g allow-passthrough on
# set -ga update-environment TERM
# set -ga update-environment TERM_PROGRAM

# ╭──────────────────────────────────────────────────────────╮
# │                       Keybindings                        │
# ╰──────────────────────────────────────────────────────────╯

#设置快捷键，来广播命令
bind-key g set-window-option synchronize-panes


#运行插件显示cpu等信息
run-shell ~/.tmux/plugins/tmux-cpu/cpu.tmux

#刷新配置，方法一：restart tmux。
# 方法二：在tmux窗口中，先按下Ctrl+b指令前缀，然后按下系统指令:，进入到命令模式后输入source-file ~/.tmux.conf，回车后生效。
# tmux source ~/.tmux.conf

